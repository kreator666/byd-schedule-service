<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ora.blockchain.mybatis.mapper.input.InputMapper">
    <insert id="insertInput">
    INSERT INTO ${database}.input (`block_hash`,`transaction_txid`, `address`,`wallet_account_id`, `txid`,`coinbase`, `vout`, `sequence`, `script_sig_hex`, `script_sig_asm`, `create_ts`)
    VALUES (#{pojo.blockHash},#{pojo.transactionTxid}, #{pojo.address}, #{pojo.walletAccountId}, #{pojo.txid},#{pojo.coinbase}, #{pojo.vout}, #{pojo.sequence}, #{pojo.scriptSigHex}, #{pojo.scriptSigAsm},now())
    </insert>
    <insert id="insertInputList">
        INSERT INTO ${database}.input (`block_hash`,`transaction_txid`, `address`,`wallet_account_id`, `txid`,`coinbase`, `vout`, `sequence`, `script_sig_hex`, `script_sig_asm`, `create_ts`)
        VALUES
        <foreach collection="inputList" item="pojo" index="index" separator=",">
            (#{pojo.blockHash},#{pojo.transactionTxid}, #{pojo.address}, #{pojo.walletAccountId}, #{pojo.txid},#{pojo.coinbase}, #{pojo.vout}, #{pojo.sequence}, #{pojo.scriptSigHex}, #{pojo.scriptSigAsm},now())
        </foreach>
    </insert>
    <delete id="deleteInput">
        DELETE FROM ${database}.input WHERE block_hash = #{blockHash}
    </delete>
    <select id="queryByBlockHash" resultType="com.ora.blockchain.mybatis.entity.input.Input">
        SELECT block_hash AS blockHash,txid,vout FROM ${database}.input WHERE block_hash = #{blockHash}
    </select>
</mapper>